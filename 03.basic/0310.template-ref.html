<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>模板引用</title>
    <script type="module">
        import { ref, createApp, useTemplateRef, onMounted, watchEffect, watch } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'

        createApp({
            setup() {
                const input = useTemplateRef('text-input');

                onMounted(() => {
                    input.value.value = 'Hello World';
                    input.value.focus();
                });

                watchEffect(() => {
                    if (input.value) {
                        console.log("input: ", input.value.value);
                        input.value.focus();
                    }
                });

                // -----------------------------------------------------------------------------
                const list = ref(["a", "b", "c"]);
                const itemRefs = useTemplateRef('items');
                onMounted(() => {
                    console.log("itemRefs: ", itemRefs.value);
                });

                watch(list.value, (newX) => {
                    console.log("itemRefs: ", itemRefs.value);
                }, {flush: "post"});

                return {
                    list,
                }
            }
        }).mount("body");
    </script>
</head>
<body>
    <h3>模板引用：</h3>
    <div>
        <input type="text" ref="text-input"/>
    </div>

    <h3>v-for 引用：</h3>
    <div>
        <div ref="items" v-for="item in list">
            {{ item }}
        </div>
        <button @click="list.push('d')">添加</button>
    </div>

    <h3>函数模板引用：</h3>
    <div>
        <input :ref="(el) => {  }">
    </div>
</body>
</html>