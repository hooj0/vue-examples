<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>组件 v-model</title>
    <script type="module">
        import { ref, createApp, watchEffect } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'

        createApp({
            setup() {
                const message = ref("hello, Vue3!");

                watchEffect(() => {
                    console.log("message: " + message.value);
                });

                const useranme = ref("jack");

                return {
                    message,
                    useranme,
                }
            }
        }).component('my-input', {
            props: ['modelValue'],
            emits: ['update:modelValue'],
            template: "#my-input-template"
        }).component('custom-input', {
            props: ['modelValue'],
            emits: ['update:modelValue'],
            computed: {
                value: {
                    get() {
                        console.log("get: " + this.modelValue);
                        return this.modelValue;
                    },
                    set(value) {
                        this.$emit('update:modelValue', value);
                    }
                }
            },
            template: "#custom-input-template"
        }).mount("body");
    </script>
</head>

<template id="my-input-template">
    <input type="text" :value="modelValue" @input="$emit('update:modelValue', $event.target.value)"/>
</template>

<template id="custom-input-template">
    <input type="text" v-model="value" />
</template>

<body>
    <h3>v-model 自定义输入框</h3>
    <my-input v-model="message"></my-input><br/>
    <custom-input v-model="useranme"></custom-input>
</body>
</html>